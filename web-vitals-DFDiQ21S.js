var n,e,t,i,r=function(n,e){return{name:n,value:void 0===e?-1:e,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},o=function(n,e){try{if(PerformanceObserver.supportedEntryTypes.includes(n)){if("first-input"===n&&!("PerformanceEventTiming"in self))return;var t=new PerformanceObserver((function(n){return n.getEntries().map(e)}));return t.observe({type:n,buffered:!0}),t}}catch(i){}},a=function(n,e){var t=function t(i){"pagehide"!==i.type&&"hidden"!==document.visibilityState||(n(i),e&&(removeEventListener("visibilitychange",t,!0),removeEventListener("pagehide",t,!0)))};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},u=function(n){addEventListener("pageshow",(function(e){e.persisted&&n(e)}),!0)},c=function(n,e,t){var i;return function(r){e.value>=0&&(r||t)&&(e.delta=e.value-(i||0),(e.delta||void 0===i)&&(i=e.value,n(e)))}},f=-1,v=function(){return"hidden"===document.visibilityState?0:1/0},s=function(){a((function(n){var e=n.timeStamp;f=e}),!0)},d=function(){return f<0&&(f=v(),s(),u((function(){setTimeout((function(){f=v(),s()}),0)}))),{get firstHiddenTime(){return f}}},m=function(n,e){var t,i=d(),a=r("FCP"),f=function(n){"first-contentful-paint"===n.name&&(s&&s.disconnect(),n.startTime<i.firstHiddenTime&&(a.value=n.startTime,a.entries.push(n),t(!0)))},v=window.performance&&performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],s=v?null:o("paint",f);(v||s)&&(t=c(n,a,e),v&&f(v),u((function(i){a=r("FCP"),t=c(n,a,e),requestAnimationFrame((function(){requestAnimationFrame((function(){a.value=performance.now()-i.timeStamp,t(!0)}))}))})))},p=!1,l=-1,g=function(n,e){p||(m((function(n){l=n.value})),p=!0);var t,i=function(e){l>-1&&n(e)},f=r("CLS",0),v=0,s=[],d=function(n){if(!n.hadRecentInput){var e=s[0],i=s[s.length-1];v&&n.startTime-i.startTime<1e3&&n.startTime-e.startTime<5e3?(v+=n.value,s.push(n)):(v=n.value,s=[n]),v>f.value&&(f.value=v,f.entries=s,t())}},g=o("layout-shift",d);g&&(t=c(i,f,e),a((function(){g.takeRecords().map(d),t(!0)})),u((function(){v=0,l=-1,f=r("CLS",0),t=c(i,f,e)})))},L={passive:!0,capture:!0},h=new Date,E=function(i,r){n||(n=r,e=i,t=new Date,y(removeEventListener),T())},T=function(){if(e>=0&&e<t-h){var r={entryType:"first-input",name:n.type,target:n.target,cancelable:n.cancelable,startTime:n.timeStamp,processingStart:n.timeStamp+e};i.forEach((function(n){n(r)})),i=[]}},w=function(n){if(n.cancelable){var e=(n.timeStamp>1e12?new Date:performance.now())-n.timeStamp;"pointerdown"==n.type?(t=e,i=n,r=function(){E(t,i),a()},o=function(){a()},a=function(){removeEventListener("pointerup",r,L),removeEventListener("pointercancel",o,L)},addEventListener("pointerup",r,L),addEventListener("pointercancel",o,L)):E(e,n)}var t,i,r,o,a},y=function(n){["mousedown","keydown","touchstart","pointerdown"].forEach((function(e){return n(e,w,L)}))},F=function(t,f){var v,s=d(),m=r("FID"),p=function(n){n.startTime<s.firstHiddenTime&&(m.value=n.processingStart-n.startTime,m.entries.push(n),v(!0))},l=o("first-input",p);v=c(t,m,f),l&&a((function(){l.takeRecords().map(p),l.disconnect()}),!0),l&&u((function(){var o;m=r("FID"),v=c(t,m,f),i=[],e=-1,n=null,y(addEventListener),o=p,i.push(o),T()}))},C={},P=function(n,e){var t,i=d(),f=r("LCP"),v=function(n){var e=n.startTime;e<i.firstHiddenTime&&(f.value=e,f.entries.push(n),t())},s=o("largest-contentful-paint",v);if(s){t=c(n,f,e);var m=function(){C[f.id]||(s.takeRecords().map(v),s.disconnect(),C[f.id]=!0,t(!0))};["keydown","click"].forEach((function(n){addEventListener(n,m,{once:!0,capture:!0})})),a(m,!0),u((function(i){f=r("LCP"),t=c(n,f,e),requestAnimationFrame((function(){requestAnimationFrame((function(){f.value=performance.now()-i.timeStamp,C[f.id]=!0,t(!0)}))}))}))}},D=function(n){var e,t=r("TTFB");e=function(){try{var e=performance.getEntriesByType("navigation")[0]||function(){var n=performance.timing,e={entryType:"navigation",startTime:0};for(var t in n)"navigationStart"!==t&&"toJSON"!==t&&(e[t]=Math.max(n[t]-n.navigationStart,0));return e}();if(t.value=t.delta=e.responseStart,t.value<0||t.value>performance.now())return;t.entries=[e],n(t)}catch(i){}},"complete"===document.readyState?setTimeout(e,0):addEventListener("load",(function(){return setTimeout(e,0)}))};export{g as getCLS,m as getFCP,F as getFID,P as getLCP,D as getTTFB};
